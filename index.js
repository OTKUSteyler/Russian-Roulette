(function(n,e,g,t,u,f,m,h){"use strict";const{View:R,Text:v,Switch:w}=h.General;function i(){return m.useProxy(e.storage),React.createElement(R,null,React.createElement(v,null,"Enable Russian Roulette?"),React.createElement(w,{value:e.storage.enabled??!0,onValueChange:function(o){return e.storage.enabled=o}}))}e.storage.settings??={allowReroll:!1,excludeSelf:!0,chanceToRemove:1,confirmRemoval:!0};const T=function(){const o=Object.entries(u.listPlugins()),_=window.__VENDETTA_PLUGIN_ID__,a=e.storage.settings.excludeSelf?o.filter(function(r){let[S]=r;return S!==_}):o;if(a.length===0){t.showToast("Not enough plugins to play!",{type:"error"});return}const l=Math.floor(Math.random()*6)+1;if(l!==e.storage.settings.chanceToRemove){t.showToast(`You rolled a ${l}. You're safe!`,{type:"success"});return}const b=Math.floor(Math.random()*a.length),[s,c]=a[b],d=function(){try{u.removePlugin(s),t.showToast(`Plugin "${c.name||s}" removed!`,{type:"danger"})}catch(r){t.showToast(`Failed to remove plugin: ${r.message}`,{type:"error"})}};e.storage.settings.confirmRemoval?f.showConfirmationAlert("Russian Roulette",`You rolled a ${l}. The plugin "${c.name||s}" will be removed!`,d,"Proceed","Cancel"):d()},y=g.addSettings("Russian Roulette",i);function P(){t.showToast("Russian Roulette Plugin Loaded!",{type:"info"})}function E(){y.remove(),t.showToast("Russian Roulette Plugin Unloaded!",{type:"info"})}return n.Settings=i,n.onLoad=P,n.onUnload=E,n.playRussianRoulette=T,n})({},vendetta.plugin,vendetta.ui.settings,vendetta.ui.toasts,vendetta.plugins,vendetta.ui.alerts,vendetta.storage,vendetta.ui.components);

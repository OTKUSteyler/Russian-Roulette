(function(a,l,m,n,c,R,w,v){"use strict";const{View:T,Text:y,Switch:P}=v.General;function d(){return w.useProxy(l.storage),React.createElement(T,null,React.createElement(y,null,"Enable Russian Roulette?"),React.createElement(P,{value:l.storage.enabled??!0,onValueChange:function(e){return l.storage.enabled=e}}))}l.storage.settings??={allowReroll:!1,excludeSelf:!0};const $=function(){const e=c.getPlugins(),f=Object.keys(e),g=window.__vendetta_loader__.plugins.find(function(o){return o.manifest&&o.manifest.name==="Russian-Roulette"})?.id,u=l.storage.settings.excludeSelf&&g?f.filter(function(o){return o!==g}):f;if(u.length===0){n.showToast("Not enough plugins to play!",t("error"));return}const i=Math.floor(Math.random()*6)+1;if(i!==6){n.showToast(`You rolled a ${i}. You're safe!`,t("success"));return}const _=Math.floor(Math.random()*u.length),s=u[_],h=e[s]?.manifest?.name||s;R.showConfirmationAlert({title:"Russian Roulette",content:`You rolled a ${i}. The plugin "${h}" will be removed!`,confirmText:"Proceed",cancelText:"Cancel",onConfirm:function(){try{c.removePlugin(s),n.showToast(`Plugin "${h}" removed!`,t("danger"))}catch(o){n.showToast(`Failed to remove plugin: ${o?.message||"Unknown error"}`,t("error"))}}})};function t(e){return typeof n.showToast=="function"&&n.showToast.length>=2?{type:e}:{content:e}}let r;try{r=m.addSettings("Russian Roulette",d)}catch(e){console.error("Failed to add settings:",e)}function b(){n.showToast("Russian Roulette Plugin Loaded!",t("info"))}function S(){r&&typeof r.remove=="function"&&r.remove(),n.showToast("Russian Roulette Plugin Unloaded!",t("info"))}return a.Settings=d,a.onLoad=b,a.onUnload=S,a.playRussianRoulette=$,a})({},vendetta.plugin,vendetta.ui.settings,vendetta.ui.toasts,vendetta.plugins,vendetta.ui.alerts,vendetta.storage,vendetta.ui.components);
